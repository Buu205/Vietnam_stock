{
  "name": "OHLCV Schema",
  "version": "1.0.0",
  "description": "Schema for OHLCV (Open, High, Low, Close, Volume) data",
  "type": "object",
  "properties": {
    "symbol": {
      "type": "string",
      "description": "Stock symbol",
      "pattern": "^[A-Z0-9]{2,10}$",
      "minLength": 2,
      "maxLength": 10
    },
    "date": {
      "type": "string",
      "format": "date",
      "description": "Trading date"
    },
    "open": {
      "type": "number",
      "minimum": 0,
      "description": "Opening price in VND"
    },
    "high": {
      "type": "number",
      "minimum": 0,
      "description": "Highest price in VND"
    },
    "low": {
      "type": "number",
      "minimum": 0,
      "description": "Lowest price in VND"
    },
    "close": {
      "type": "number",
      "minimum": 0,
      "description": "Closing price in VND"
    },
    "volume": {
      "type": "integer",
      "minimum": 0,
      "description": "Trading volume in shares"
    },
    "resolution": {
      "type": "string",
      "enum": ["1D", "1W", "1M", "1Y"],
      "default": "1D",
      "description": "Time resolution"
    },
    "updated_at": {
      "type": "string",
      "format": "date-time",
      "description": "Last update timestamp"
    },
    "market_cap": {
      "type": "number",
      "minimum": 0,
      "description": "Market capitalization in VND"
    },
    "shares_outstanding": {
      "type": "number",
      "minimum": 0,
      "description": "Shares outstanding"
    }
  },
  "required": ["symbol", "date", "open", "high", "low", "close", "volume"],
  "additionalProperties": false,
  "validation_rules": {
    "ohlc_consistency": {
      "description": "High must be >= Open, Low, Close; Low must be <= Open, High, Close",
      "type": "custom_validation"
    },
    "price_range": {
      "description": "Prices should be within reasonable range (0.01 - 1,000,000 VND)",
      "min_price": 0.01,
      "max_price": 1000000
    },
    "volume_range": {
      "description": "Volume should be non-negative",
      "min_volume": 0
    }
  }
}
